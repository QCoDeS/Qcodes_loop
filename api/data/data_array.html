<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>qcodes_loop.data.data_array &#8212; qcodes_loop  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="qcodes_loop.data.data_set" href="data_set.html" />
    <link rel="prev" title="qcodes_loop.data" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-qcodes_loop.data.data_array">
<span id="qcodes-loop-data-data-array"></span><h1>qcodes_loop.data.data_array<a class="headerlink" href="#module-qcodes_loop.data.data_array" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">qcodes_loop.data.data_array.</span></span><span class="sig-name descname"><span class="pre">DataArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snapshot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_arrays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_setpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preset_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray" title="Link to this definition">¶</a></dt>
<dd><p>A container for one parameter in a measurement loop.</p>
<p>If this is a measured parameter, This object doesn’t contain
the data of the setpoints it was measured at, but it references
the DataArray objects of these parameters. Those objects only have
the dimensionality at which they were set - ie the inner loop setpoint
the same dimensionality as the measured parameter, but the outer
loop setpoint(s) have lower dimensionality</p>
<p>When it’s first created, a DataArray has no dimensionality, you must call
.nest for each dimension.</p>
<p>If preset_data is provided it is used to initialize the data, and the array
can still be nested around it (making many copies of the data).
Otherwise it is an error to nest an array that already has data.</p>
<p>Once the array is initialized, a DataArray acts a lot like a numpy array,
because we delegate attributes through to the numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter</strong> (<em>Optional</em><em>[</em><em>Parameter</em><em>]</em>) – The parameter whose values will
populate this array, if any. Will copy <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">full_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">label</span></code>, <code class="docutils literal notranslate"><span class="pre">unit</span></code>, and <code class="docutils literal notranslate"><span class="pre">snapshot</span></code> from here unless you
provide them explicitly.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The short name of this array.
TODO: use full_name as name, and get rid of short name</p></li>
<li><p><strong>full_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The complete name of this array. If the
array is based on a parameter linked to an instrument, this is
typically ‘&lt;instrument_name&gt;_&lt;param_name&gt;’</p></li>
<li><p><strong>label</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – A description of the values in this array to
use for axis and colorbar labels on plots.</p></li>
<li><p><strong>snapshot</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – Metadata snapshot to save with this array.</p></li>
<li><p><strong>array_id</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – A name for this array that’s unique within
its <code class="docutils literal notranslate"><span class="pre">DataSet</span></code>. Typically the full_name, but when the <code class="docutils literal notranslate"><span class="pre">DataSet</span></code>
is constructed we will append ‘_&lt;i&gt;’ (<code class="docutils literal notranslate"><span class="pre">i</span></code> is an integer starting
from 1) if necessary to differentiate arrays with the same id.
TODO: this only happens for arrays provided to the DataSet
constructor, not those added with add_array. Fix this!
Also, do we really need array_id <em>and</em> full_name (let alone name
but I’ve already said we should remove this)?</p></li>
<li><p><strong>set_arrays</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><a class="reference internal" href="#qcodes_loop.data.data_array.DataArray" title="qcodes_loop.data.data_array.DataArray"><em>DataArray</em></a><em>]</em><em>]</em>) – If this array is being
created with shape already, you can provide one setpoint array
per dimension. The first should have one dimension, the second
two dimensions, etc.</p></li>
<li><p><strong>shape</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>]</em><em>]</em>) – The shape (as in numpy) of the array.
Will be prepended with new dimensions by any calls to <code class="docutils literal notranslate"><span class="pre">nest</span></code>.</p></li>
<li><p><strong>action_indices</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>]</em><em>]</em>) – If used within a <code class="docutils literal notranslate"><span class="pre">Loop</span></code>,
these are the indices at each level of nesting within the
<code class="docutils literal notranslate"><span class="pre">Loop</span></code> of the loop action that’s populating this array.
TODO: this shouldn’t be in DataArray at all, the loop should
handle converting this to array_id internally (maybe it
already does?)</p></li>
<li><p><strong>unit</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The unit of the values stored in this array.</p></li>
<li><p><strong>units</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – DEPRECATED, redirects to <code class="docutils literal notranslate"><span class="pre">unit</span></code>.</p></li>
<li><p><strong>is_setpoint</strong> (<em>bool</em>) – True if this is a setpoint array, False if it
is measured. Default False.</p></li>
<li><p><strong>preset_data</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>numpy.ndarray</em><em>, </em><em>Sequence</em><em>]</em><em>]</em>) – Contents of the
array, if already known (for example if this is a setpoint
array). <code class="docutils literal notranslate"><span class="pre">shape</span></code> will be inferred from this array instead of
from the <code class="docutils literal notranslate"><span class="pre">shape</span></code> argument.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.apply_changes">
<span class="sig-name descname"><span class="pre">apply_changes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.apply_changes" title="Link to this definition">¶</a></dt>
<dd><p>Insert new synced values into the array.</p>
<p>To be be called in a <code class="docutils literal notranslate"><span class="pre">PULL_FROM_SERVER</span></code> <code class="docutils literal notranslate"><span class="pre">DataSet</span></code> using results
returned by <code class="docutils literal notranslate"><span class="pre">get_changes</span></code> from the <code class="docutils literal notranslate"><span class="pre">DataServer</span></code>.</p>
<p>TODO: check that vals has the right length?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>int</em>) – the flat index of the first new value.</p></li>
<li><p><strong>stop</strong> (<em>int</em>) – the flat index of the last new value.</p></li>
<li><p><strong>vals</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>) – the new values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.clear" title="Link to this definition">¶</a></dt>
<dd><p>Fill the (already existing) data array with nan.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.clear_save">
<span class="sig-name descname"><span class="pre">clear_save</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.clear_save" title="Link to this definition">¶</a></dt>
<dd><p>Make previously saved parts of this array look unsaved (modified).</p>
<p>This can be used to force overwrite or rewrite, like if we’re
moving or copying the <code class="docutils literal notranslate"><span class="pre">DataSet</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.data_set">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">data_set</span></span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.data_set" title="Link to this definition">¶</a></dt>
<dd><p>The DataSet this array belongs to.</p>
<p>A DataArray can belong to at most one DataSet.
TODO: make this a weakref</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.delegate_attr_objects">
<span class="sig-name descname"><span class="pre">delegate_attr_objects</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['ndarray']</span></span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.delegate_attr_objects" title="Link to this definition">¶</a></dt>
<dd><p>A list of names (strings) of objects
which are (or will be) attributes of <code class="docutils literal notranslate"><span class="pre">self</span></code>, whose attributes
should be passed through to <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.flat_index">
<span class="sig-name descname"><span class="pre">flat_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.flat_index" title="Link to this definition">¶</a></dt>
<dd><p>Generate the raveled index for the given indices.</p>
<p>This is the index you would have if the array is reshaped to 1D,
looping over the indices from inner to outer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> (<em>Sequence</em>) – indices of an element or slice of this array.</p></li>
<li><p><strong>index_fill</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>]</em>) – extra indices to use if
<code class="docutils literal notranslate"><span class="pre">indices</span></code> has less dimensions than the array, ie it points
to a slice rather than a single element. Use zeros to get the
beginning of this slice, and [d - 1 for d in shape] to get the
end of the slice.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the resulting flat index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.fraction_complete">
<span class="sig-name descname"><span class="pre">fraction_complete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.fraction_complete" title="Link to this definition">¶</a></dt>
<dd><p>Get the fraction of this array which has data in it.</p>
<p>Or more specifically, the fraction of the latest point in the array
where we have touched it.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>fraction of array which is complete, from 0.0 to 1.0</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.from_xarray">
<span class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">from_xarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xarray_dataarray</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xr.DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#qcodes_loop.data.data_array.DataArray" title="qcodes_loop.data.data_array.DataArray"><span class="pre">DataArray</span></a></span></span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.from_xarray" title="Link to this definition">¶</a></dt>
<dd><p>Create a DataArray from an xarray DataArray</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array_id</strong> – Array id for the new DataArray. If None, then use the first data variable from the argument</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Created xarray DataArray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.get_changes">
<span class="sig-name descname"><span class="pre">get_changes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synced_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.get_changes" title="Link to this definition">¶</a></dt>
<dd><p>Find changes since the last sync of this array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synced_index</strong> (<em>int</em>) – The last flat index which has already
been synced.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>None if there is no new data. If there is,</dt><dd><dl class="simple">
<dt>returns a dict with keys:</dt><dd><p>start (int): the flat index of the first returned value.
stop (int): the flat index of the last returned value.
vals (List[float]): the new values</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[dict, None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.get_synced_index">
<span class="sig-name descname"><span class="pre">get_synced_index</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.get_synced_index" title="Link to this definition">¶</a></dt>
<dd><p>Get the last index which has been synced from the server.</p>
<p>Will also initialize the array if this hasn’t happened already.
TODO: seems hacky to init_data here.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>the last flat index which has been synced from the server,</dt><dd><p>or -1 if no data has been synced.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.init_data">
<span class="sig-name descname"><span class="pre">init_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.init_data" title="Link to this definition">¶</a></dt>
<dd><p>Create the actual numpy array to hold data.</p>
<p>The array will be sized based on either <code class="docutils literal notranslate"><span class="pre">self.shape</span></code> or
data provided here.</p>
<p>Idempotent: will do nothing if the array already exists.</p>
<p>If data is provided, this array is marked as a preset
meaning it can still be nested around this data.
TODO: per above, perhaps remove this distinction entirely?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>numpy.ndarray</em><em>, </em><em>Sequence</em><em>]</em><em>]</em>) – If provided,
we fill the array with this data. Otherwise the new
array will be filled with NaN.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">self.shape</span></code> does not match <code class="docutils literal notranslate"><span class="pre">data.shape</span></code></p></li>
<li><p><strong>ValueError</strong> – if the array was already initialized with a
    different shape than we’re about to create</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.mark_saved">
<span class="sig-name descname"><span class="pre">mark_saved</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_saved_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.mark_saved" title="Link to this definition">¶</a></dt>
<dd><p>Mark certain outstanding modifications as saved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>last_saved_index</strong> (<em>int</em>) – The flat index of the last point
saved. If <code class="docutils literal notranslate"><span class="pre">modified_range</span></code> extends beyond this, the
data past <code class="docutils literal notranslate"><span class="pre">last_saved_index</span></code> will still be marked
modified, otherwise <code class="docutils literal notranslate"><span class="pre">modified_range</span></code> is cleared
entirely.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.nest">
<span class="sig-name descname"><span class="pre">nest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.nest" title="Link to this definition">¶</a></dt>
<dd><p>Nest this array inside a new outer loop.</p>
<p>You cannot call <code class="docutils literal notranslate"><span class="pre">nest</span></code> after <code class="docutils literal notranslate"><span class="pre">init_data</span></code> unless this is a
setpoint array.
TODO: is this restriction really useful? And should we maintain
a distinction between _preset and is_setpoint, or can wejust use
is_setpoint?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>int</em>) – Length of the new loop.</p></li>
<li><p><strong>action_index</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – Within the outer loop at this
nesting level, which action does this array derive from?</p></li>
<li><p><strong>set_array</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#qcodes_loop.data.data_array.DataArray" title="qcodes_loop.data.data_array.DataArray"><em>DataArray</em></a><em>]</em>) – The setpoints of the new outer
loop. If this DataArray <em>is</em> a setpoint array, you should
omit both <code class="docutils literal notranslate"><span class="pre">action_index</span></code> and <code class="docutils literal notranslate"><span class="pre">set_array</span></code>, and it will
reference itself as the inner setpoint array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>self, in case you want to construct the array with</dt><dd><p>chained method calls.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#qcodes_loop.data.data_array.DataArray" title="qcodes_loop.data.data_array.DataArray">DataArray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.snapshot">
<span class="sig-name descname"><span class="pre">snapshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.snapshot" title="Link to this definition">¶</a></dt>
<dd><p>JSON representation of this DataArray.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.DataArray.to_xarray">
<span class="sig-name descname"><span class="pre">to_xarray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">xr.DataArray</span></span></span><a class="headerlink" href="#qcodes_loop.data.data_array.DataArray.to_xarray" title="Link to this definition">¶</a></dt>
<dd><p>Return this DataArray as an xarray dataarray</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataArray in xarray format</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.data_array_to_xarray_dictionary">
<span class="sig-prename descclassname"><span class="pre">qcodes_loop.data.data_array.</span></span><span class="sig-name descname"><span class="pre">data_array_to_xarray_dictionary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#qcodes_loop.data.data_array.DataArray" title="qcodes_loop.data.data_array.DataArray"><span class="pre">DataArray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#qcodes_loop.data.data_array.data_array_to_xarray_dictionary" title="Link to this definition">¶</a></dt>
<dd><p>Convert DataArray to a dictionary in xarray format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_array</strong> – The DataArray to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary containing the data in xarray format.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="qcodes_loop.data.data_array.xarray_data_array_dictionary_to_data_array">
<span class="sig-prename descclassname"><span class="pre">qcodes_loop.data.data_array.</span></span><span class="sig-name descname"><span class="pre">xarray_data_array_dictionary_to_data_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_dictionary</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_setpoint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preset_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.data_array.xarray_data_array_dictionary_to_data_array" title="Link to this definition">¶</a></dt>
<dd><p>Convert xarray dictionary to a DataArray</p>
<p>This conversion is for bith the data array and the the internal xarray structure, e.g. the datavars and coords.
:param array_id: Create the new DataArray with this id
:param array_dictionary: Data to convert
:param is_setpoint: Passed to the DataArray constructor
:param preset_data: If None use the data from the dictionary, otherwise use the specified data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary containing the data in xarray format.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">qcodes_loop</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QCoDeS_loop api</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../loops.html">qcodes_loop.loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../actions.html">qcodes_loop.actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../measure.html">qcodes_loop.measure</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">qcodes_loop.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/slack.html">qcodes_loop.extensions.slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plots/index.html">qcodes_loop.plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/magic.html">qcodes_loop.utils.magic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">QCoDeS_loop examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">QCoDeS_loop api</a><ul>
  <li><a href="index.html">qcodes_loop.data</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">qcodes_loop.data</a></li>
      <li>Next: <a href="data_set.html" title="next chapter">qcodes_loop.data.data_set</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, QCoDeS developers.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.0.4</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/api/data/data_array.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>