<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>qcodes_loop.data.io &#8212; qcodes_loop  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="qcodes_loop.data.location" href="location.html" />
    <link rel="prev" title="qcodes_loop.data.hdf5_format_hickle" href="hdf5_format_hickle.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-qcodes_loop.data.io">
<span id="qcodes-loop-data-io"></span><h1>qcodes_loop.data.io<a class="headerlink" href="#module-qcodes_loop.data.io" title="Link to this heading">¶</a></h1>
<p>IO managers for QCodes.</p>
<p>IO managers wrap whatever physical storage layer the user wants to use
in an interface mimicking the built-in &lt;open&gt; context manager, with
some restrictions to minimize the overhead in creating new IO managers.</p>
<p>The main thing these managers need to implement is the open context manager:</p>
<ul>
<li><p>Only the context manager needs to be implemented, not separate
open function and close methods.</p></li>
<li><p>open takes the standard parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p>filename: (string)</p></li>
<li><p>mode: (string) only ‘r’ (read), ‘w’ (write), and ‘a’ (append) are
expected to be implemented. As with normal file objects, the only
difference between write and append is that write empties the file
before adding new data, and append leaves the existing contents in
place but starts writing at the end.</p></li>
<li><p>encoding: If a special output encoding is desired. i.e. ‘utf8</p></li>
</ul>
</div></blockquote>
</li>
<li><p>the file-like object returned should implement a minimal set of operations.</p>
<dl class="simple">
<dt>In read mode:</dt><dd><ul class="simple">
<li><p>read([size]): read to the end or at most size bytes into a string</p></li>
<li><p>readline([size]): read until a newline or up to size bytes, into a string</p></li>
<li><p>iter(): usually return self, but can be any iterator over lines</p></li>
<li><p>next(): assuming iter() returns self, this yields the next line.</p></li>
</ul>
</dd>
<dt>In write or append mode:</dt><dd><ul class="simple">
<li><p>write(s): add string s to the end of the file.</p></li>
<li><p>writelines(seq): add a sequence of strings</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>IO managers should also implement:</p>
<ul class="simple">
<li><p>a join method, ala <code class="docutils literal notranslate"><span class="pre">os.path.join(*args)</span></code>.</p></li>
<li><p>a list method, that returns all objects matching location</p></li>
<li><p>a remove method, ala os.remove(path) except that it will remove directories
as well as files, since we’re allowing “locations” to be directories
or files.</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">qcodes_loop.data.io.</span></span><span class="sig-name descname"><span class="pre">DiskIO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO" title="Link to this definition">¶</a></dt>
<dd><p>Simple IO object to wrap disk operations with a custom base location.</p>
<p>Also accepts both forward and backward slashes at any point, and
normalizes both to the OS we are currently on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_location</strong> (<em>str</em>) – a path to the root data folder.
Converted to an absolute path immediately, so even if you supply a
relative path, later changes to the OS working directory will not
affect data paths.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.isfile">
<span class="sig-name descname"><span class="pre">isfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.isfile" title="Link to this definition">¶</a></dt>
<dd><p>Check whether this location matches a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.join" title="Link to this definition">¶</a></dt>
<dd><p>Context-dependent os.path.join for this io manager.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.list">
<span class="sig-name descname"><span class="pre">list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxdepth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.list" title="Link to this definition">¶</a></dt>
<dd><p>Return all files that match location.</p>
<p>This is either files whose names match up to an arbitrary extension,
or any files within an exactly matching directory name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<em>str</em>) – the location to match.
May contain the usual path wildcards * and ?</p></li>
<li><p><strong>maxdepth</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – maximum levels of directory nesting to
recurse into looking for files. Default 1.</p></li>
<li><p><strong>include_dirs</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – whether to allow directories in
the results or just files. Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of matching files and/or directories, as locations
relative to our base_location.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.open" title="Link to this definition">¶</a></dt>
<dd><p>Mimic the interface of the built in open context manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – path relative to base_location.</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – ‘r’ (read), ‘w’ (write), or ‘a’ (append).
Other open modes are not supported because we don’t want
to force all IO managers to support others.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>context manager yielding the open file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.remove" title="Link to this definition">¶</a></dt>
<dd><p>Delete a file or folder and prune the directory tree.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.remove_all">
<span class="sig-name descname"><span class="pre">remove_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.remove_all" title="Link to this definition">¶</a></dt>
<dd><p>Delete all files/directories in the dataset at this location.</p>
<p>Afterward prunes the directory tree.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.to_location">
<span class="sig-name descname"><span class="pre">to_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.to_location" title="Link to this definition">¶</a></dt>
<dd><p>Convert a local filesystem path into a location string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – a path on the local file system.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the location string corresponding to this path.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qcodes_loop.data.io.DiskIO.to_path">
<span class="sig-name descname"><span class="pre">to_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes_loop.data.io.DiskIO.to_path" title="Link to this definition">¶</a></dt>
<dd><p>Convert a location string into a path on the local file system.</p>
<p>For DiskIO this just fixes slashes and prepends the base location,
doing nothing active with the file. But for other io managers that
refer to remote storage, this method may actually fetch the file and
put it at a temporary local path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>location</strong> (<em>str</em>) – A location string for a complete dataset or
a file within it.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path on disk to which this location maps.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">qcodes_loop</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QCoDeS_loop api</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../loops.html">qcodes_loop.loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../actions.html">qcodes_loop.actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../measure.html">qcodes_loop.measure</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">qcodes_loop.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/slack.html">qcodes_loop.extensions.slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plots/index.html">qcodes_loop.plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/magic.html">qcodes_loop.utils.magic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">QCoDeS_loop examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">QCoDeS_loop api</a><ul>
  <li><a href="index.html">qcodes_loop.data</a><ul>
      <li>Previous: <a href="hdf5_format_hickle.html" title="previous chapter">qcodes_loop.data.hdf5_format_hickle</a></li>
      <li>Next: <a href="location.html" title="next chapter">qcodes_loop.data.location</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, QCoDeS developers.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.0.4</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/api/data/io.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>